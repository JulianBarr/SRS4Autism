# CUMA - Pinyin Syllable Note Type
# Whole syllable with 5 cards

## Fields (current):
ElementToLearn, Syllable, WordPinyin, WordHanzi, WordPicture, _Remarks, _KG_Map

## Card 0: Element Card (Teaching Card)

### Front Template:
<div class="pinyin-syllable-card">
  <div class="element-to-learn">
    <p>å­¦ä¹ å…ƒç´  (Learning Element):</p>
    <div class="element-display">{{ElementToLearn}}</div>
  </div>
  
  <div class="teaching-sequence">
    <p>å¬éŸ³åºåˆ— (Audio Sequence):</p>
    <div id="teaching-audio" style="display: none;">
      [sound:mo1.mp3] [sound:{{ElementToLearn}}1.mp3] [sound:{{Syllable}}.mp3]
      <span id="pause-marker"></span>
      [sound:{{Syllable}}.mp3] [sound:{{Syllable}}.mp3]
    </div>
    <button onclick="playTeachingSequence()" class="play-btn">â–¶ï¸ æ’­æ”¾</button>
    <button onclick="toggleSound()" class="sound-toggle">ğŸ”Š å£°éŸ³: å¼€</button>
  </div>
</div>

<script>
let soundEnabled = true;

function playTeachingSequence() {
  if (!soundEnabled) return;
  const audioDiv = document.getElementById('teaching-audio');
  if (audioDiv) {
    audioDiv.style.display = 'block';
    setTimeout(() => {
      audioDiv.style.display = 'none';
    }, 100);
  }
}

function toggleSound() {
  soundEnabled = !soundEnabled;
  const btn = document.querySelector('.sound-toggle');
  btn.textContent = soundEnabled ? 'ğŸ”Š å£°éŸ³: å¼€' : 'ğŸ”‡ å£°éŸ³: å…³';
}
</script>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>Element:</strong> {{ElementToLearn}}</p>
  <p><strong>Syllable:</strong> {{Syllable}}</p>
</div>

## Card 1: Word to Pinyin (Teaching Card)

### Front Template:
<div class="pinyin-syllable-card">
  {{#WordPicture}}
  <div class="word-picture">{{WordPicture}}</div>
  {{/WordPicture}}
  
  <div class="word-display">
    <p class="word-hanzi">{{WordHanzi}}</p>
    <p class="word-pinyin-hint">{{WordPinyin}}</p>
  </div>
  
  <div class="instruction">
    <p>é€‰æ‹©æ­£ç¡®çš„æ‹¼éŸ³ (Select the correct pinyin):</p>
  </div>
  
  <div class="teaching-audio-section">
    <div id="word-to-pinyin-audio" style="display: none;">
      [sound:mo1.mp3] [sound:{{ElementToLearn}}1.mp3] [sound:{{Syllable}}.mp3]
      <span id="pause-marker"></span>
      [sound:{{Syllable}}.mp3] [sound:{{Syllable}}.mp3]
    </div>
    <button onclick="playWordToPinyinSequence()" class="play-btn">â–¶ï¸ æ’­æ”¾</button>
  </div>
</div>

<script>
function playWordToPinyinSequence() {
  const audioDiv = document.getElementById('word-to-pinyin-audio');
  if (audioDiv) {
    audioDiv.style.display = 'block';
    setTimeout(() => {
      audioDiv.style.display = 'none';
    }, 100);
  }
}
</script>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>æ­£ç¡®ç­”æ¡ˆ:</strong> {{Syllable}}</p>
  <p><strong>æ±‰å­—:</strong> {{WordHanzi}}</p>
</div>

## Card 2: MCQ Recent

### Front Template:
<div class="pinyin-syllable-card">
  {{#WordPicture}}
  <div class="word-picture">{{WordPicture}}</div>
  {{/WordPicture}}
  
  <div class="word-display">
    <p class="word-hanzi">{{WordHanzi}}</p>
  </div>
  
  <div class="instruction">
    <p>é€‰æ‹©æ­£ç¡®çš„æ‹¼éŸ³ (Select the correct pinyin):</p>
  </div>
  
  <div class="mcq-options" id="mcq-recent-front">
    <!-- Options will be populated from fields -->
    <button class="mcq-option" data-correct="{{Syllable}}" onclick="selectMCQ(this, 'mcq-recent')">
      {{Syllable}}
    </button>
    <!-- Add more options from fields if available -->
  </div>
</div>

<script>
function selectMCQ(button, cardType) {
  const options = document.querySelectorAll(`#${cardType}-front .mcq-option, #${cardType}-back .mcq-option`);
  options.forEach(opt => {
    opt.classList.remove('selected', 'wrong');
  });
  
  const correct = button.getAttribute('data-correct');
  const selected = button.textContent.trim();
  
  if (selected === correct) {
    button.classList.add('selected');
    // Play bell sound
    const bellAudio = document.createElement('div');
    bellAudio.innerHTML = '[sound:bell.wav]';
    bellAudio.style.display = 'block';
    setTimeout(() => bellAudio.remove(), 100);
  } else {
    button.classList.add('wrong');
    // Highlight correct answer
    options.forEach(opt => {
      if (opt.textContent.trim() === correct) {
        opt.classList.add('selected');
      }
    });
  }
}
</script>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>æ­£ç¡®ç­”æ¡ˆ:</strong> <span class="correct-answer">{{Syllable}}</span></p>
</div>

<div class="mcq-options" id="mcq-recent-back">
  <!-- Same options as front, in same order, with correct answer highlighted -->
  <button class="mcq-option selected">{{Syllable}}</button>
  <!-- Other options -->
</div>

## Card 3: MCQ Tone (Same structure as MCQ Recent)

### Front Template:
<div class="pinyin-syllable-card">
  {{#WordPicture}}
  <div class="word-picture">{{WordPicture}}</div>
  {{/WordPicture}}
  
  <div class="word-display">
    <p class="word-hanzi">{{WordHanzi}}</p>
  </div>
  
  <div class="instruction">
    <p>é€‰æ‹©æ­£ç¡®çš„æ‹¼éŸ³å£°è°ƒ (Select the correct tone):</p>
  </div>
  
  <div class="mcq-options" id="mcq-tone-front">
    <button class="mcq-option" data-correct="{{Syllable}}" onclick="selectMCQ(this, 'mcq-tone')">
      {{Syllable}}
    </button>
    <!-- Tone variations -->
  </div>
</div>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>æ­£ç¡®ç­”æ¡ˆ:</strong> <span class="correct-answer">{{Syllable}}</span></p>
</div>

<div class="mcq-options" id="mcq-tone-back">
  <button class="mcq-option selected">{{Syllable}}</button>
  <!-- Other tone options in same order -->
</div>

## Card 4: MCQ Confusor (Same structure as MCQ Recent)

### Front Template:
<div class="pinyin-syllable-card">
  {{#WordPicture}}
  <div class="word-picture">{{WordPicture}}</div>
  {{/WordPicture}}
  
  <div class="word-display">
    <p class="word-hanzi">{{WordHanzi}}</p>
  </div>
  
  <div class="instruction">
    <p>é€‰æ‹©æ­£ç¡®çš„æ‹¼éŸ³ (Select the correct pinyin):</p>
  </div>
  
  <div class="mcq-options" id="mcq-confusor-front">
    <button class="mcq-option" data-correct="{{Syllable}}" onclick="selectMCQ(this, 'mcq-confusor')">
      {{Syllable}}
    </button>
    <!-- Confusor options -->
  </div>
</div>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>æ­£ç¡®ç­”æ¡ˆ:</strong> <span class="correct-answer">{{Syllable}}</span></p>
</div>

<div class="mcq-options" id="mcq-confusor-back">
  <button class="mcq-option selected">{{Syllable}}</button>
  <!-- Other confusor options in same order -->
</div>

## Card 5: Pinyin to Word (MCQ Reverse)

### Front Template:
<div class="pinyin-syllable-card">
  <div class="pinyin-display">
    <p class="syllable-pinyin">{{Syllable}}</p>
  </div>
  
  <div class="instruction">
    <p>é€‰æ‹©æ­£ç¡®çš„æ±‰å­— (Select the correct character):</p>
  </div>
  
  <div class="mcq-options" id="mcq-reverse-front">
    <button class="mcq-option" data-correct="{{WordHanzi}}" onclick="selectMCQ(this, 'mcq-reverse')">
      {{WordHanzi}}
    </button>
    <!-- Other word options -->
  </div>
</div>

### Back Template:
{{FrontSide}}

<hr id="answer">

<div class="answer-section">
  <p><strong>æ­£ç¡®ç­”æ¡ˆ:</strong> <span class="correct-answer">{{WordHanzi}}</span></p>
  {{#WordPicture}}
  <div class="word-picture">{{WordPicture}}</div>
  {{/WordPicture}}
</div>

<div class="mcq-options" id="mcq-reverse-back">
  <button class="mcq-option selected">{{WordHanzi}}</button>
  <!-- Other word options in same order -->
</div>

### Styling (shared for all cards):
.pinyin-syllable-card {
  font-family: Arial, sans-serif;
  padding: 20px;
  text-align: center;
}

.word-picture img {
  max-width: 300px;
  max-height: 300px;
  border-radius: 8px;
  margin-bottom: 20px;
}

.word-display {
  margin: 20px 0;
}

.word-hanzi {
  font-size: 48px;
  font-weight: bold;
  color: #333;
  margin: 10px 0;
}

.word-pinyin-hint {
  font-size: 24px;
  color: #666;
}

.syllable-pinyin {
  font-size: 72px;
  font-weight: bold;
  color: #2196F3;
  margin: 20px 0;
}

.mcq-options {
  display: flex;
  justify-content: center;
  gap: 15px;
  flex-wrap: wrap;
  margin-top: 20px;
}

.mcq-option {
  padding: 15px 30px;
  font-size: 24px;
  border: 2px solid #ddd;
  border-radius: 8px;
  background-color: white;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 100px;
}

.mcq-option:hover {
  background-color: #f5f5f5;
  border-color: #999;
}

.mcq-option.selected {
  background-color: #4CAF50;
  color: white;
  border-color: #4CAF50;
}

.mcq-option.wrong {
  background-color: #f44336;
  color: white;
  border-color: #f44336;
}

.correct-answer {
  font-size: 32px;
  font-weight: bold;
  color: #4CAF50;
}

.instruction {
  margin: 20px 0;
  font-size: 18px;
  color: #666;
}

.answer-section {
  margin-top: 20px;
  padding: 15px;
  background-color: #f0f8ff;
  border-radius: 8px;
}

.play-btn, .sound-toggle {
  padding: 12px 24px;
  font-size: 16px;
  border: 2px solid #2196F3;
  border-radius: 8px;
  background-color: white;
  color: #2196F3;
  cursor: pointer;
  margin: 5px;
  transition: all 0.2s;
}

.play-btn:hover, .sound-toggle:hover {
  background-color: #2196F3;
  color: white;
}
